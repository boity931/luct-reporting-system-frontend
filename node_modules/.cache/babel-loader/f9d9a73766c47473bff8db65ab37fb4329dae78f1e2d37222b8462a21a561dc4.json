{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import{Form,Button,Table,Card,InputGroup,FormControl}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Lectures=_ref=>{let{role}=_ref;const[lectures,setLectures]=useState([]);const[reports,setReports]=useState([]);const[selectedReport,setSelectedReport]=useState('');const[search,setSearch]=useState('');const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Fetch lectures\nconst fetchLectures=useCallback(async()=>{try{const res=await axios.get(\"\".concat(API_URL,\"/lectures\"),{headers:{'x-auth-token':localStorage.getItem('token')}});setLectures(res.data);}catch(err){console.error('Fetch lectures error:',err);}},[API_URL]);// Fetch available reports\nconst fetchReports=useCallback(async()=>{try{const res=await axios.get(\"\".concat(API_URL,\"/lectures/available-reports\"),{headers:{'x-auth-token':localStorage.getItem('token')}});setReports(res.data);}catch(err){console.error('Fetch reports error:',err);}},[API_URL]);useEffect(()=>{fetchLectures();fetchReports();},[fetchLectures,fetchReports]);const onSubmit=async e=>{e.preventDefault();if(!selectedReport)return alert('Error assigning lecture. Select a lecture from reports.');try{await axios.post(\"\".concat(API_URL,\"/lectures\"),{report_id:selectedReport},{headers:{'x-auth-token':localStorage.getItem('token')}});setSelectedReport('');fetchLectures();}catch(err){console.error('Add lecture error:',err);}};const deleteLecture=async id=>{if(!window.confirm('Are you sure you want to delete this lecture?'))return;try{await axios.delete(\"\".concat(API_URL,\"/lectures/\").concat(id),{headers:{'x-auth-token':localStorage.getItem('token')}});fetchLectures();}catch(err){console.error('Delete lecture error:',err);}};const filteredLectures=lectures.filter(l=>(l.course_name||'').toLowerCase().includes(search.toLowerCase()));return/*#__PURE__*/_jsxs(Card,{className:\"p-4\",children:[role==='pl'&&/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,className:\"mb-4\",children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"reportSelect\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Select Lecture (from Reports)\"}),/*#__PURE__*/_jsxs(Form.Select,{value:selectedReport,onChange:e=>setSelectedReport(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a lecture\"}),reports.map(r=>/*#__PURE__*/_jsxs(\"option\",{value:r.id,children:[r.course_name,\" \\u2014 \",r.course_code]},r.id))]})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Assign Lecture\"})]}),/*#__PURE__*/_jsx(InputGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsx(FormControl,{placeholder:\"Search lectures...\",value:search,onChange:e=>setSearch(e.target.value)})}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Lecturer ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),role==='pl'&&/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredLectures.map(l=>{var _l$date_of_lecture;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:l.id}),/*#__PURE__*/_jsx(\"td\",{children:l.course_name}),/*#__PURE__*/_jsx(\"td\",{children:l.course_id}),/*#__PURE__*/_jsx(\"td\",{children:l.lecturer_id}),/*#__PURE__*/_jsx(\"td\",{children:(_l$date_of_lecture=l.date_of_lecture)===null||_l$date_of_lecture===void 0?void 0:_l$date_of_lecture.split('T')[0]}),role==='pl'&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"sm\",onClick:()=>deleteLecture(l.id),children:\"Delete\"})})]},l.id);})})]})]});};export default Lectures;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","Form","Button","Table","Card","InputGroup","FormControl","jsx","_jsx","jsxs","_jsxs","Lectures","_ref","role","lectures","setLectures","reports","setReports","selectedReport","setSelectedReport","search","setSearch","API_URL","process","env","REACT_APP_API_URL","fetchLectures","res","get","concat","headers","localStorage","getItem","data","err","console","error","fetchReports","onSubmit","e","preventDefault","alert","post","report_id","deleteLecture","id","window","confirm","delete","filteredLectures","filter","l","course_name","toLowerCase","includes","className","children","Group","controlId","Label","Select","value","onChange","target","required","map","r","course_code","variant","type","placeholder","striped","bordered","hover","_l$date_of_lecture","course_id","lecturer_id","date_of_lecture","split","size","onClick"],"sources":["C:/Users/Tech Semiconductors/luct-reporting-system/frontend/src/components/Lectures.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { Form, Button, Table, Card, InputGroup, FormControl } from 'react-bootstrap';\r\n\r\nconst Lectures = ({ role }) => {\r\n  const [lectures, setLectures] = useState([]);\r\n  const [reports, setReports] = useState([]);\r\n  const [selectedReport, setSelectedReport] = useState('');\r\n  const [search, setSearch] = useState('');\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n  // Fetch lectures\r\n  const fetchLectures = useCallback(async () => {\r\n    try {\r\n      const res = await axios.get(`${API_URL}/lectures`, {\r\n        headers: { 'x-auth-token': localStorage.getItem('token') }\r\n      });\r\n      setLectures(res.data);\r\n    } catch (err) {\r\n      console.error('Fetch lectures error:', err);\r\n    }\r\n  }, [API_URL]);\r\n\r\n  // Fetch available reports\r\n  const fetchReports = useCallback(async () => {\r\n    try {\r\n      const res = await axios.get(`${API_URL}/lectures/available-reports`, {\r\n        headers: { 'x-auth-token': localStorage.getItem('token') }\r\n      });\r\n      setReports(res.data);\r\n    } catch (err) {\r\n      console.error('Fetch reports error:', err);\r\n    }\r\n  }, [API_URL]);\r\n\r\n  useEffect(() => {\r\n    fetchLectures();\r\n    fetchReports();\r\n  }, [fetchLectures, fetchReports]);\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedReport) return alert('Error assigning lecture. Select a lecture from reports.');\r\n\r\n    try {\r\n      await axios.post(`${API_URL}/lectures`, { report_id: selectedReport }, {\r\n        headers: { 'x-auth-token': localStorage.getItem('token') }\r\n      });\r\n      setSelectedReport('');\r\n      fetchLectures();\r\n    } catch (err) {\r\n      console.error('Add lecture error:', err);\r\n    }\r\n  };\r\n\r\n  const deleteLecture = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this lecture?')) return;\r\n    try {\r\n      await axios.delete(`${API_URL}/lectures/${id}`, {\r\n        headers: { 'x-auth-token': localStorage.getItem('token') }\r\n      });\r\n      fetchLectures();\r\n    } catch (err) {\r\n      console.error('Delete lecture error:', err);\r\n    }\r\n  };\r\n\r\n  const filteredLectures = lectures.filter(l =>\r\n    (l.course_name || '').toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <Card className=\"p-4\">\r\n      {role === 'pl' && (\r\n        <Form onSubmit={onSubmit} className=\"mb-4\">\r\n          <Form.Group controlId=\"reportSelect\" className=\"mb-3\">\r\n            <Form.Label>Select Lecture (from Reports)</Form.Label>\r\n            <Form.Select\r\n              value={selectedReport}\r\n              onChange={e => setSelectedReport(e.target.value)}\r\n              required\r\n            >\r\n              <option value=\"\">Select a lecture</option>\r\n              {reports.map(r => (\r\n                <option key={r.id} value={r.id}>\r\n                  {r.course_name} â€” {r.course_code}\r\n                </option>\r\n              ))}\r\n            </Form.Select>\r\n          </Form.Group>\r\n          <Button variant=\"primary\" type=\"submit\">Assign Lecture</Button>\r\n        </Form>\r\n      )}\r\n\r\n      <InputGroup className=\"mb-3\">\r\n        <FormControl\r\n          placeholder=\"Search lectures...\"\r\n          value={search}\r\n          onChange={e => setSearch(e.target.value)}\r\n        />\r\n      </InputGroup>\r\n\r\n      <Table striped bordered hover>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Course Name</th>\r\n            <th>Course ID</th>\r\n            <th>Lecturer ID</th>\r\n            <th>Date</th>\r\n            {role === 'pl' && <th>Action</th>}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {filteredLectures.map(l => (\r\n            <tr key={l.id}>\r\n              <td>{l.id}</td>\r\n              <td>{l.course_name}</td>\r\n              <td>{l.course_id}</td>\r\n              <td>{l.lecturer_id}</td>\r\n              <td>{l.date_of_lecture?.split('T')[0]}</td>\r\n              {role === 'pl' && (\r\n                <td>\r\n                  <Button variant=\"danger\" size=\"sm\" onClick={() => deleteLecture(l.id)}>Delete</Button>\r\n                </td>\r\n              )}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </Table>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Lectures;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}